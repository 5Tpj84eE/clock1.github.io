<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>時計</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #F2F2F2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #clockCanvas {
      display: block;
      max-width: 100vw;
      max-height: 80vh; /* デジタル時計用に下部スペース確保 */
    }
    #digitalClock {
      margin-top: 8px;
      font-size: 2.4em;
      text-align: center;
    }
    #digitalClock rt {
      font-size: 0.6em;
    }
    .hour {
      color: #C62828;
    }
    .minute {
      color: #1565C0;
    }
    .second {
      color: #42A5F5;
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas id="clockCanvas"></canvas>
    <div id="digitalClock"></div>
  </div>

  <script>
    const canvas = document.getElementById("clockCanvas");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      // 画面の短辺に合わせて正方形を確保（高さは80%）
      const size = Math.min(window.innerWidth, window.innerHeight * 0.8);
      canvas.width = size;
      canvas.height = size;
    }

    function drawClock() {
      resizeCanvas();
      const radius = canvas.height / 2;
      ctx.setTransform(1, 0, 0, 1, 0, 0); // reset transform
      ctx.translate(radius, radius);

      ctx.clearRect(-radius, -radius, canvas.width, canvas.height);
      drawFace(ctx, radius);
      drawNumbers(ctx, radius);
      drawTime(ctx, radius);
      updateDigitalClock();
    }

    function drawFace(ctx, radius) {
      ctx.beginPath();
      ctx.arc(0, 0, radius * 0.95, 0, 2 * Math.PI);
      ctx.fillStyle = "#fff";
      ctx.fill();
    }

    function drawNumbers(ctx, radius) {
      ctx.font = radius * 0.12 + "px Arial";
      ctx.textBaseline = "middle";
      ctx.textAlign = "center";

      // 時（1〜12）
      ctx.fillStyle = "#C62828";
      for (let num = 1; num <= 12; num++) {
        let angle = (num * Math.PI) / 6;
        let x = radius * 0.75 * Math.sin(angle);
        let y = -radius * 0.75 * Math.cos(angle);
        ctx.fillText(num.toString(), x, y);
      }

      // 分・秒（0〜59）
      ctx.font = radius * 0.06 + "px Arial";
      ctx.fillStyle = "#1565C0";
      for (let num = 0; num < 60; num++) {
        let angle = (num * Math.PI) / 30;
        let x = radius * 0.9 * Math.sin(angle);
        let y = -radius * 0.9 * Math.cos(angle);
        ctx.fillText(num.toString(), x, y);
      }
    }

    function drawTime(ctx, radius) {
      const now = new Date();
      let hour = now.getHours();
      let minute = now.getMinutes();
      let second = now.getSeconds();

      // 時針（赤）
      let hourPos = (hour % 12) * Math.PI / 6 + (minute * Math.PI) / (6 * 60);
      drawHand(ctx, hourPos, radius * 0.5, radius * 0.07, "#C62828");

      // 分針（青）
      let minutePos = (minute * Math.PI) / 30 + (second * Math.PI) / (30 * 60);
      drawHand(ctx, minutePos, radius * 0.7, radius * 0.05, "#1565C0");

      // 秒針（水色）
      let secondPos = (second * Math.PI) / 30;
      drawHand(ctx, secondPos, radius * 0.8, radius * 0.02, "#42A5F5");
    }

    function drawHand(ctx, pos, length, width, color) {
      ctx.beginPath();
      ctx.lineWidth = width;
      ctx.lineCap = "round";
      ctx.strokeStyle = color;
      ctx.moveTo(0, 0);
      ctx.lineTo(length * Math.sin(pos), -length * Math.cos(pos));
      ctx.stroke();
    }

    function updateDigitalClock() {
      const now = new Date();
      let hour = now.getHours();
      let minute = now.getMinutes();
      let second = now.getSeconds();

      // 12時間表記
      let displayHour = hour % 12;
      if (displayHour === 0) displayHour = 12;

      const digital = `
        <span class="hour">${displayHour}<ruby>時<rt>じ</rt></ruby></span>
        <span class="minute">${minute}<ruby>分<rt>ふん</rt></ruby></span>
        <span class="second">${second}<ruby>秒<rt>びょう</rt></ruby></span>
      `;
      document.getElementById("digitalClock").innerHTML = digital;
    }

    setInterval(drawClock, 1000);
    drawClock();
    window.addEventListener("resize", drawClock);
  </script>
</body>
</html>
